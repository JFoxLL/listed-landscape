<!-- Dedicated stylesheet for this Show template -->
<%= stylesheet_link_tag 'lics_show_page' %>

<!-- SEO details -->
<% content_for :title do %>
  <%= @lic.name %> (<%= @lic.ticker %>) | Listed Landscape
<% end %>

<% content_for :description do %>
  [<%= Time.now.strftime("%b %Y") %> Updated!] <%= @lic.name %> (ASX: <%= @lic.ticker %>). Performance, Portfolio Holdings, Dividend History, Profit Reserves, Fees, and more...
<% end %>

<% content_for :keywords do %>
  <%= @lic.name %>, <%= @lic.ticker %>, Listed Landscape
<% end %>


<!-- Page Header -->
<div class="page-header">
  <div class="page-header-content">
    <div class="page-header-logo">
      <%= image_tag "lic_logos/#{@lic.logo_filename}.png", alt: "#{@lic.name} Logo", class: "page-logo" %>
    </div>
    <div class="page-header-info">
      <span class="page-header-lic-name"><%= @lic.name %> (<%= @lic.ticker %>)</span>
    </div>
  </div>
</div>

<!-- Hover Menu -->
<%= render partial: 'lics/show_page_menu' %>

<!-- Overview -->
<section>
  <h2 id="overview">Overview</h2>
  <div class="overview">
    <table>
      <tbody>
        <tr>
          <td class="label">LIC Name</td>
          <td class="value"><%= @lic.name %></td>
        </tr>
        <tr>
          <td class="label">ASX Ticker</td>
          <td class="value"><%= @lic.ticker %></td>
        </tr>
        <tr>
          <td class="label">Listing Year</td>
          <td class="value"><%= @lic.listing_year %> (<%= @lic.yrs_operating %> years operating)</td>
        </tr>
        <tr>
          <td class="label">Size (Market Cap)</td>
          <td class="value"><%= format_market_cap(@lic.market_cap) %></td>
        </tr>
        <tr>
          <td class="label">Investment Focus</td>
          <td class="value"><%= @lic.investment_focus %></td>
        </tr>
        <tr>
          <td class="label">Portfolio Bias</td>
          <td class="value"><%= @lic.portfolio_bias %></td>
        </tr>
        <tr>
          <td class="label">Benchmark</td>
          <td class="value"><%= @lic.benchmark %></td>
        </tr>
        <tr>
          <td class="label">Management Structure</td>
          <td class="value"><%= @lic.management_structure %></td>
        </tr>
        <tr>
          <td class="label">Investment Manager</td>
          <td class="value"><%= @lic.investment_manager %></td>
        </tr>
        <tr>
          <td class="label">Management Fee Structure</td>
          <td class="value"><%= @lic.management_fee %></td>
        </tr>
        <tr>
          <td class="label">Performance Fee Structure</td>
          <td class="value"><%= @lic.performance_fee %></td>
        </tr>
        <tr>
          <td class="label">Calculated Cost (FY23)</td>
          <td class="value"><%= sprintf("%.2f", @lic.calculated_mer) %>% (excluding Performance Fees)</td>
        </tr>
        <tr>
          <td class="label">Objective</td>
          <td class="value"><%= @lic.objective %></td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- Separator -->
<%= render partial: 'show_page_separator' %>

<!-- Key People  -->
<section>
  <h2 id="key-personnel">Key Personnel</h2>

  <h3>Board Members</h3>
  <div class="key-people-section">
    <div class="key-people-container">
      <ul class="key-people-list">
        <% @lic.key_people_directors.each do |person| %>
          <%= render partial: 'lics/key_people', locals: { person: person, ticker: @lic.ticker } %>
        <% end %>
      </ul>
    </div>
  </div>

  <% if @lic.key_people_investment_managers.any? %>
    <h3>Investment Management</h3>
      <div class="key-people-section">
        <div class="key-people-container">
          <ul class="key-people-list">
            <% @lic.key_people_investment_managers.each do |person| %>
              <%= render partial: 'lics/key_people', locals: { person: person, ticker: @lic.ticker } %>
            <% end %>
          </ul>
        </div>
      </div>
  <% end %>  
</section>

<!-- Separator -->
<%= render partial: 'show_page_separator' %>

<!-- Shareholders & Portfolio Size -->
<section>
  <h2 id="shareholders-size">Shareholders & Portfolio Size</h2>

    <h3>Number of Shareholders</h3>
    <div class="chart-number-shareholders">
      <%= column_chart @lic.chart_number_shareholders, 
          suffix: "K",
          colors: ["#d4541b"], 
          **common_chart_styling 
      %> 
    </div>

    <h3>Size (Net Assets)</h3>
    <div class="chart-size-net-assets">
      <%= column_chart @lic.chart_size_net_assets, 
          prefix: "$",
          suffix: "M", 
          thousands: ",", 
          colors: ["#d4541b"], 
          **common_chart_styling 
      %>
    </div>
</section>

<!-- Separator -->
<%= render partial: 'show_page_separator' %>

<!-- Share Price vs NTA -->
<section>
  <h2 id="share-price-nta">Share Price vs NTA</h2>
  <div class="chart-share-price-vs-nta-filter">
    <%= form_tag(url_for(action: 'show', id: @lic.slug), method: "get", id: "chart-share-price-vs-nta-filter-options") do %>
      <label for="tax_type" class="chart-share-price-vs-nta-filter-label">NTA Tax Type:</label>
      <%= select_tag 'tax_type', options_for_select([['Pre Tax', 'pre_tax'], ['Post Tax', 'post_tax']], @selected_tax_type), class: "chart-share-price-vs-nta-filter-select" %>
      <label for="time_duration" class="chart-share-price-vs-nta-filter-label">Time Duration:</label>
      <%= select_tag 'time_duration', options_for_select((1..10).map { |i| [ "#{i} Year#{'s' if i > 1}", i ] }, @selected_time_duration), class: "chart-share-price-vs-nta-filter-select" %>
      <%= submit_tag "Update Chart", class: "button" %>
    <% end %>
  </div>

  <div class="chart-share-price-vs-nta">
    <%= column_chart @lic.chart_share_price_vs_nta(@selected_time_duration, @selected_tax_type), 
        suffix: "%", 
        round: 1,
        **share_price_vs_nta_chart_styling(@selected_time_duration, @selected_tax_type, @lic) 
    %>
  </div>
</section>

<!-- Separator -->
<%= render partial: 'show_page_separator' %>

<!-- Back to top button -->
<%= render partial: 'layouts/back_to_top_button' %>



